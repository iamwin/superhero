"use strict";$(function(){var e=Cookie.get("name"),s="您好，"+e;e?($(".not_check").css("display","block"),$(".not_check").html(s)):$(".not_check").css("display","none"),$(".not_check").click(function(){if(confirm("您确认要退出吗？")){var e=new Date;e.setDate(e.getDate()-1),Cookie.set("name",1,{expires:e,path:"/"}),$(".not_check").css("display","none")}}),$(".sea_shop").mouseenter(function(){$(".sea_car").css("display","block")}),$(".sea_shop").mouseleave(function(){$(".sea_car").css("display","none")}),$(".sea_shop").click(function(){location.href="../html/shoppingcar.html"}),$(".sea_car").mouseenter(function(){$(".sea_car").css("display","block")}),$(".sea_car").mouseleave(function(){$(".sea_car").css("display","none")}),$(".small_car").on("click",".delete",function(){var e=$(this).prev().prev().prev().prev().html();confirm("您确认要删除此商品吗？")&&$.ajax({type:"get",url:"../api/dele_one_byname.php",async:"true",data:{name:e},success:function(e){e&&t()}})}),$(document).scroll(function(){1<=(document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop)?($("#search").addClass("sea_push1"),$("#search").css("background","rgba(51,51,51,0.8"),$(".sea_car").addClass("sea_push2")):($("#search").removeClass("sea_push1"),$("#search").css("background","#E0E0E0"),$(".sea_car").removeClass("sea_push2"))}),$(".yiji").mouseenter(function(){$(".erji").css("display","block")}),$(".yiji").mouseleave(function(){$(".erji").css("display","none")}),$(".erji").mouseenter(function(){$(".erji").css("display","block")}),$(".erji").mouseleave(function(){$(".erji").css("display","none")}),$(".lis_shouqi").click(function(){$(".erji").css("display","none")}),$(".erji").find("li").click(function(){location.href="../html/lists.html"}),$(".three").find("div").find("span").click(function(){location.href="../html/lists.html"});var n=window.location.search;n=n.slice(1),$.ajax({type:"get",url:"../api/search_id.php",async:"true",data:{id:n},success:function(e){var s=JSON.parse(e);$(".det_name").html(s[0].name),$(".det_price").html(s[0].price),$(".det_sales").html(s[0].buy)}}),$(".det_small").find("div").mouseenter(function(){var e=$(this).index();$(".det_picb").find("div").css("display","none"),$(".det_picb").find("div").eq(e).css("display","block");var s="../img/details/det_s"+(e+1)+".jpg";$(".det_plus img").attr("src",s)}),$(".det_picb").mousemove(function(e){var s=e.pageX,a=e.pageY,i=$(".det_picb").offset().top,n=$(".det_picb").offset().left,t=$(".fdj").width(),c=$(".fdj").height(),d=a-i-c/2,l=s-n-t/2,o=$(".det_picb").width()-t,p=$(".det_picb").height()-c;d=p<(d=d<0?0:d)?p:d,l=o<(l=l<0?0:l)?o:l,$(".fdj").css({top:d,left:l});var r=$(".det_plus").width()-$(".det_img").width(),u=$(".det_plus").height()-$(".det_img").height(),m=2*-l,f=2*-d;m=m<r?r:m,f=f<u?u:f,$(".det_img").css({top:f,left:m})});var a=1;function t(){$.ajax({type:"get",url:"../api/search_car.php",async:"true",data:{id:n},success:function(e){for(var s=JSON.parse(e),a=0,i=0,n=0;n<s.length;n++)a=1*a+1*s[n].number,i=(i=1*i+s[n].number*s[n].price).toFixed(2);if($(".sea_num").html(a),$(".sid_num").html(a),$(".sea_say").html(a),$(".sea_say2").html("￥"+i),0<s.length){$(".sea_null").css("display","none"),$(".sea_che").css("display","none");$(".det_name").html();$.ajax({type:"get",url:"../api/lists.php",async:"true",data:{},success:function(e){var s=JSON.parse(e).map(function(e){return'<div class="moban">\n                                            <img src="../img/lists/'+e.img+'.jpg" alt="" />\n                                            <a href="javascript:;">'+e.name+"</a>\n                                            <span>￥"+e.price+"</span>\n                                            <span>x</span>\n                                            <span>"+e.number+'</span>\n                                            <a class="delete" href="javascript:;">删除</a>\n                                        </div>'}).join("");$(".small_car").html(s)}})}else $(".sea_null").css("display","block"),$(".sea_che").css("display","block")}})}$(".det_add").click(function(){a++,$(".det_num").val(a)}),$(".det_reduce").click(function(){--a<1&&(a=1,window.alert("数量至少为1!")),$(".det_num").val(a)}),$(".addcar").click(function(){$("#sid_fly").css("display","block");var e="../img/lists/"+n+".jpg";$("#sid_fly").attr("src",e),$("#sid_fly").animate({left:"601px"},function(){$("#sid_fly").css("display","none"),$("#sid_fly").animate({left:"101px"},1)})}),t(),$(".addcar").click(function(){var s=$(".det_price").html(),a=$(".det_num").val(),i=$(".det_name").html();$.ajax({type:"get",url:"../api/search_.php",async:"true",data:{name:i},success:function(e){1==e?$.ajax({type:"get",url:"../api/name.php",async:"true",data:{name:i},success:function(e){var s=1*JSON.parse(e)[0].number+1*a;$.ajax({type:"get",url:"../api/updata.php",async:"true",data:{name:i,number:s},success:function(e){e&&t()}})}}):$.ajax({type:"get",url:"../api/addtocar.php",async:"true",data:{name:i,id:n,number:a,price:s},success:function(e){e&&t()}})}})}),$(".buynow").click(function(){var s=$(".det_price").html(),a=$(".det_num").val(),i=$(".det_name").html();$.ajax({type:"get",url:"../api/search_.php",async:"true",data:{name:i},success:function(e){1==e?$.ajax({type:"get",url:"../api/name.php",async:"true",data:{name:i},success:function(e){var s=1*JSON.parse(e)[0].number+1*a;$.ajax({type:"get",url:"../api/updata.php",async:"true",data:{name:i,number:s},success:function(e){e&&(t(),location.href="../html/shoppingcar.html")}})}}):$.ajax({type:"get",url:"../api/addtocar.php",async:"true",data:{name:i,id:n,number:a,price:s},success:function(e){e&&(t(),location.href="../html/shoppingcar.html")}})}})}),$(".sea_go").click(function(){location.href="../html/shoppingcar.html"}),$(".det_change4").find("li").click(function(){var e=$(".det_change4").find("li"),s=$(this).index();e.removeClass("det_color"),$(this).addClass("det_color"),0==s&&($(".det_change").css("display","block"),$(".det_change2").css("display","none"),$(".det_change3").css("display","none")),1==s&&($(".det_change2").css("display","block"),$(".det_change").css("display","none"),$(".det_change3").css("display","none")),2==s&&($(".det_change3").css("display","block"),$(".det_change2").css("display","none"),$(".det_change").css("display","none"))}),$(".sid_one").mouseenter(function(){$(".sid_one>div").css("display","block"),$(".sid_one>div").animate({left:"-162px"},function(){$(".sid_one>div").animate({left:"-92px"})})}),$(".sid_one").mouseleave(function(){$(".sid_one>div").css("display","none")}),$(".sid_two").click(function(){location.href="../html/shoppingcar.html"}),$(".sid_three").mouseenter(function(){$(".sid_three>div").css("display","block"),$(".sid_three>div").animate({left:"-162px"},function(){$(".sid_three>div").animate({left:"-92px"})})}),$(".sid_three").mouseleave(function(){$(".sid_three>div").css("display","none")}),$(".sid_four").mouseenter(function(){$(".sid_four>div").css("display","block"),$(".sid_four>div").animate({left:"-162px"},function(){$(".sid_four>div").animate({left:"-92px"})})}),$(".sid_four").mouseleave(function(){$(".sid_four>div").css("display","none")}),$(".sid_five").mouseenter(function(){$(".sid_five>div").css("display","block"),$(".sid_five>div").animate({left:"-162px"},function(){$(".sid_five>div").animate({left:"-92px"})})}),$(".sid_five").mouseleave(function(){$(".sid_five>div").css("display","none")}),$(".sid_six").mouseenter(function(){$(".sid_six>div").css("display","block"),$(".sid_six>div").animate({left:"-162px"},function(){$(".sid_six>div").animate({left:"-92px"})})}),$(".sid_six").mouseleave(function(){$(".sid_six>div").css("display","none")})});